#summary Opcodes listing
#labels Featured,Phase-Design

= Introduction =

This wiki page will list all 256 opcodes used in Magic-1
M1 opcodes will be an index pointing to the Microinstruction memory, so each opcode will point one or more microinstruction stored in PROM memory.

In the fpga-magic-1 project all proms will be described inside the FPGA.


= Details =

{{{
opcode_t opcodes[256] = {
	{"halt",IM_NONE,IM_NONE},
	{"ld.8 A,0x%04x(SP)",IM_WORD,IM_NONE},
	{"push C",IM_NONE,IM_NONE},
	{"push PC",IM_NONE,IM_NONE},
	{"push DP",IM_NONE,IM_NONE},
	{"ld.8 B,0x%04x(SP)",IM_WORD,IM_NONE},
	{"push A",IM_NONE,IM_NONE},
	{"push B",IM_NONE,IM_NONE},
	{"br.ne L%04X",IM_WORD,IM_NONE},
	{"pop MSW",IM_NONE,IM_NONE},
	{"pop C",IM_NONE,IM_NONE},
	{"pop PC",IM_NONE,IM_NONE},
	{"pop DP",IM_NONE,IM_NONE},
	{"pop SP",IM_NONE,IM_NONE},
	{"pop A",IM_NONE,IM_NONE},
	{"pop B",IM_NONE,IM_NONE},
	{"ld.8 A,0x%04x(DP)",IM_WORD,IM_NONE},
	{"ld.8 A,0x%02x(SP)",IM_BYTE,IM_NONE},
	{"ld.8 A,0x%04x(A)",IM_WORD,IM_NONE},
	{"ld.8 A,0x%04x(B)",IM_WORD,IM_NONE},
	{"ld.8 B,0x%04x(DP)",IM_WORD,IM_NONE},
	{"ld.8 B,0x%02x(SP)",IM_BYTE,IM_NONE},
	{"ld.8 B,0x%04x(A)",IM_WORD,IM_NONE},
	{"ld.8 B,0x%04x(B)",IM_WORD,IM_NONE},
	{"ld.16 A,0x%04x(DP)",IM_WORD,IM_NONE},
	{"ld.16 A,0x%04x(SP)",IM_WORD,IM_NONE},
	{"ld.16 A,0x%04x(A)",IM_WORD,IM_NONE},
	{"ld.16 A,0x%04x(B)",IM_WORD,IM_NONE},
	{"ld.16 B,0x%04x(DP)",IM_WORD,IM_NONE},
	{"ld.16 B,0x%04x(SP)",IM_WORD,IM_NONE},
	{"ld.16 B,0x%04x(A)",IM_WORD,IM_NONE},
	{"ld.16 B,0x%04x(B)",IM_WORD,IM_NONE},
	{"sub.8 A,0x%04x(DP)",IM_WORD,IM_NONE},
	{"sub.8 A,0x%04x(SP)",IM_WORD,IM_NONE},
	{"push MSW",IM_NONE,IM_NONE},
	{"sub.8 A,0x%04x(B)",IM_WORD,IM_NONE},
	{"sub.8 A,0x%04x",IM_EXT8,IM_NONE},
	{"sub.16 (--A),(--B)",IM_NONE,IM_NONE},
	{"push SP",IM_NONE,IM_NONE},
	{"sub.8 A,B",IM_NONE,IM_NONE},
	{"sub.16 A,0x%04x(DP)",IM_WORD,IM_NONE},
	{"sub.16 A,0x%04x(SP)",IM_WORD,IM_NONE},
	{"sbc.16 (--A),(--B)",IM_NONE,IM_NONE},
	{"sub.16 A,0x%04x(B)",IM_WORD,IM_NONE},
	{"sub.16 A,0x%04x",IM_WORD,IM_NONE},
	{"sub.16 A,0x%04x",IM_EXT8,IM_NONE},
	{"wcpte A,(B)",IM_NONE,IM_NONE},
	{"sub.16 A,B",IM_NONE,IM_NONE},
	{"add.8 A,0x%04x(DP)",IM_WORD,IM_NONE},
	{"add.8 A,0x%04x(SP)",IM_WORD,IM_NONE},
	{"br A",IM_NONE,IM_NONE},
	{"add.8 A,0x%04x(B)",IM_WORD,IM_NONE},
	{"add.8 A,0x%04x",IM_EXT8,IM_NONE},
	{"add.16 (--A),(--B)",IM_NONE,IM_NONE},
	{"add.8 A,A",IM_NONE,IM_NONE},
	{"add.8 A,B",IM_NONE,IM_NONE},
	{"add.16 A,0x%04x(DP)",IM_WORD,IM_NONE},
	{"add.16 A,0x%04x(SP)",IM_WORD,IM_NONE},
	{"syscall 0x%02x",IM_BYTE,IM_NONE},
	{"add.16 A,0x%04x(B)",IM_WORD,IM_NONE},
	{"add.16 A,0x%04x",IM_WORD,IM_NONE},
	{"add.16 A,0x%04x",IM_EXT8,IM_NONE},
	{"add.16 A,A",IM_NONE,IM_NONE},
	{"add.16 A,B",IM_NONE,IM_NONE},
	{"cmp.8 A,0x%04x(DP)",IM_WORD,IM_NONE},
	{"cmp.8 A,0x%04x(SP)",IM_WORD,IM_NONE},
	{"copy C,B",IM_NONE,IM_NONE},
	{"cmp.8 A,0x%04x(B)",IM_WORD,IM_NONE},
	{"cmp.8 A,0x%04x",IM_EXT8,IM_NONE},
	{"cmp.8 A,0x0000",IM_NONE,IM_NONE},
	{"xor.16 A,A",IM_NONE,IM_NONE},
	{"cmp.8 A,B",IM_NONE,IM_NONE},
	{"cmp.16 A,0x%04x(DP)",IM_WORD,IM_NONE},
	{"cmp.16 A,0x%04x(SP)",IM_WORD,IM_NONE},
	{"sh0add B,A,B",IM_NONE,IM_NONE},
	{"cmp.16 A,0x%04x(B)",IM_WORD,IM_NONE},
	{"cmp.16 A,0x%04x",IM_WORD,IM_NONE},
	{"cmp.16 A,0x%04x",IM_EXT8,IM_NONE},
	{"cmp.16 A,0x0000",IM_NONE,IM_NONE},
	{"cmp.16 A,B",IM_NONE,IM_NONE},
	{"or.8 A,0x%04x(DP)",IM_WORD,IM_NONE},
	{"or.8 A,0x%04x(SP)",IM_WORD,IM_NONE},
	{"sex A",IM_NONE,IM_NONE},
	{"or.8 A,0x%04x(B)",IM_WORD,IM_NONE},
	{"or.8 A,0x%04x",IM_EXT8,IM_NONE},
	{"or.16 (--A),(--B)",IM_NONE,IM_NONE},
	{"br.leu L%04X",IM_WORD,IM_NONE},
	{"or.8 A,B",IM_NONE,IM_NONE},
	{"or.16 A,0x%04x(DP)",IM_WORD,IM_NONE},
	{"or.16 A,0x%04x(SP)",IM_WORD,IM_NONE},
	{"sh1add A,B,A",IM_NONE,IM_NONE},
	{"or.16 A,0x%04x(B)",IM_WORD,IM_NONE},
	{"or.16 A,0x%04x",IM_WORD,IM_NONE},
	{"or.16 A,0x%04x",IM_EXT8,IM_NONE},
	{"br.gtu L%04X",IM_WORD,IM_NONE},
	{"or.16 A,B",IM_NONE,IM_NONE},
	{"and.8 A,0x%04x(DP)",IM_WORD,IM_NONE},
	{"and.8 A,0x%04x(SP)",IM_WORD,IM_NONE},
	{"sh1add B,A,B",IM_NONE,IM_NONE},
	{"and.8 A,0x%04x(B)",IM_WORD,IM_NONE},
	{"and.8 A,0x%04x",IM_EXT8,IM_NONE},
	{"and.16 (--A),(--B)",IM_NONE,IM_NONE},
	{"nop",IM_NONE,IM_NONE},
	{"and.8 A,B",IM_NONE,IM_NONE},
	{"and.16 A,0x%04x(DP)",IM_WORD,IM_NONE},
	{"and.16 A,0x%04x(SP)",IM_WORD,IM_NONE},
	{"sh1add B,B,A",IM_NONE,IM_NONE},
	{"and.16 A,0x%04x(B)",IM_WORD,IM_NONE},
	{"and.16 A,0x%04x",IM_WORD,IM_NONE},
	{"and.16 A,0x%04x",IM_EXT8,IM_NONE},
	{"strcopy",IM_NONE,IM_NONE},
	{"and.16 A,B",IM_NONE,IM_NONE},
	{"lea A,0x%04x(DP)",IM_WORD,IM_NONE},
	{"lea A,0x%04x(SP)",IM_WORD,IM_NONE},
	{"lea A,0x%04x(A)",IM_WORD,IM_NONE},
	{"lea A,0x%04x(B)",IM_WORD,IM_NONE},
	{"lea B,0x%04x(DP)",IM_WORD,IM_NONE},
	{"lea B,0x%04x(SP)",IM_WORD,IM_NONE},
	{"lea B,0x%04x(A)",IM_WORD,IM_NONE},
	{"lea B,0x%04x(B)",IM_WORD,IM_NONE},
	{"ld.8 A,0x%02x",IM_BYTE,IM_NONE},
	{"ld.8 B,0x%02x",IM_BYTE,IM_NONE},
	{"ld.16 A,0x%04x",IM_WORD,IM_NONE},
	{"ld.16 B,0x%04x",IM_WORD,IM_NONE},
	{"ld.16 A,0x%04x",IM_WORD,IM_NONE},
	{"ld.16 B,0x%04x",IM_WORD,IM_NONE},
	{"adc.16 A,A",IM_NONE,IM_NONE},
	{"adc.16 A,B",IM_NONE,IM_NONE},
	{"call L%04X",IM_WORD,IM_NONE},
	{"ld.16 A,0x%02x(SP)",IM_BYTE,IM_NONE},
	{"call A",IM_NONE,IM_NONE},
	{"br L%04X",IM_WORD,IM_NONE},
	{"sbr L%04X",IM_EXT8,IM_NONE},
	{"ld.16 B,0x%02x(SP)",IM_BYTE,IM_NONE},
	{"lea A,0x%02x(SP)",IM_BYTE,IM_NONE},
	{"lea B,0x%02x(SP)",IM_BYTE,IM_NONE},
	{"copy A,MSW",IM_NONE,IM_NONE},
	{"br.eq L%04X",IM_WORD,IM_NONE},
	{"reti",IM_NONE,IM_NONE},
	{"trapo",IM_NONE,IM_NONE},
	{"bset.8 A,0x%04x,L%04X",IM_BYTE,IM_EXT8},
	{"bclr.8 A,0x%04x,L%04X",IM_BYTE,IM_EXT8},
	{"bset.16 A,0x%04x,L%04X",IM_WORD,IM_EXT8},
	{"bclr.16 A,0x%04x,L%04X",IM_WORD,IM_EXT8},
	{"cmpb.eq.8 A,0x%04x(DP),L%04X",IM_WORD,IM_EXT8},
	{"cmpb.eq.8 A,0x%04x(SP),L%04X",IM_WORD,IM_EXT8},
	{"copy B,A",IM_NONE,IM_NONE},
	{"cmpb.eq.8 A,0x%04x(B),L%04X",IM_WORD,IM_EXT8},
	{"cmpb.eq.8 A,0x%04x,L%04X",IM_EXT8,IM_EXT8},
	{"cmpb.eq.8 A,0x0000,L%04X",IM_NONE,IM_EXT8},
	{"copy C,A",IM_NONE,IM_NONE},
	{"cmpb.eq.8 A,B,L%04X",IM_EXT8,IM_NONE},
	{"cmpb.eq.16 A,0x%04x(DP),L%04X",IM_WORD,IM_EXT8},
	{"cmpb.eq.16 A,0x%04x(SP),L%04X",IM_WORD,IM_EXT8},
	{"copy A,B",IM_NONE,IM_NONE},
	{"cmpb.eq.16 A,0x%04x(B),L%04X",IM_WORD,IM_EXT8},
	{"cmpb.eq.16 A,0x%04x,L%04X",IM_WORD,IM_EXT8},
	{"cmpb.eq.16 A,0x%04x,L%04X",IM_EXT8,IM_EXT8},
	{"cmpb.eq.16 A,0x0000,L%04X",IM_NONE,IM_EXT8},
	{"cmpb.eq.16 A,B,L%04X",IM_EXT8,IM_NONE},
	{"cmpb.lt.8 A,0x%04x(DP),L%04X",IM_WORD,IM_EXT8},
	{"cmpb.lt.8 A,0x%04x(SP),L%04X",IM_WORD,IM_EXT8},
	{"sh0add A,A,B",IM_NONE,IM_NONE},
	{"cmpb.lt.8 A,0x%04x(B),L%04X",IM_WORD,IM_EXT8},
	{"cmpb.lt.8 A,0x%04x,L%04X",IM_EXT8,IM_EXT8},
	{"cmpb.lt.8 A,0x0000,L%04X",IM_NONE,IM_EXT8},
	{"br.lt L%04X",IM_WORD,IM_NONE},
	{"cmpb.lt.8 A,B,L%04X",IM_EXT8,IM_NONE},
	{"cmpb.lt.16 A,0x%04x(DP),L%04X",IM_WORD,IM_EXT8},
	{"cmpb.lt.16 A,0x%04x(SP),L%04X",IM_WORD,IM_EXT8},
	{"sh1add A,A,B",IM_NONE,IM_NONE},
	{"cmpb.lt.16 A,0x%04x(B),L%04X",IM_WORD,IM_EXT8},
	{"cmpb.lt.16 A,0x%04x,L%04X",IM_WORD,IM_EXT8},
	{"cmpb.lt.16 A,0x%04x,L%04X",IM_EXT8,IM_EXT8},
	{"br.ge L%04X",IM_WORD,IM_NONE},
	{"cmpb.lt.16 A,B,L%04X",IM_EXT8,IM_NONE},
	{"cmpb.le.8 A,0x%04x(DP),L%04X",IM_WORD,IM_EXT8},
	{"cmpb.le.8 A,0x%04x(SP),L%04X",IM_WORD,IM_EXT8},
	{"sex B",IM_NONE,IM_NONE},
	{"cmpb.le.8 A,0x%04x(B),L%04X",IM_WORD,IM_EXT8},
	{"cmpb.le.8 A,0x%04x,L%04X",IM_EXT8,IM_EXT8},
	{"br.le L%04X",IM_WORD,IM_NONE},
	{"copy DP,A",IM_NONE,IM_NONE},
	{"cmpb.le.8 A,B,L%04X",IM_EXT8,IM_NONE},
	{"cmpb.le.16 A,0x%04x(DP),L%04X",IM_WORD,IM_EXT8},
	{"cmpb.le.16 A,0x%04x(SP),L%04X",IM_WORD,IM_EXT8},
	{"adc.16 (--A),(--B)",IM_NONE,IM_NONE},
	{"cmpb.le.16 A,0x%04x(B),L%04X",IM_WORD,IM_EXT8},
	{"cmpb.le.16 A,0x%04x,L%04X",IM_WORD,IM_EXT8},
	{"cmpb.le.16 A,0x%04x,L%04X",IM_EXT8,IM_EXT8},
	{"br.gt L%04X",IM_WORD,IM_NONE},
	{"cmpb.le.16 A,B,L%04X",IM_EXT8,IM_NONE},
	{"br.geu L%04X",IM_WORD,IM_NONE},
	{"st.8 0x%04x(SP),A",IM_WORD,IM_NONE},
	{"shl.16 A",IM_NONE,IM_NONE},
	{"shr.16 A",IM_NONE,IM_NONE},
	{"shl.16 B",IM_NONE,IM_NONE},
	{"st.8 0x%04x(SP),B",IM_WORD,IM_NONE},
	{"shr.16 B",IM_NONE,IM_NONE},
	{"xor.16 A,B",IM_NONE,IM_NONE},
	{"copy PTB,A",IM_NONE,IM_NONE},
	{"st.16 0x%04x(SP),A",IM_WORD,IM_NONE},
	{"copy MSW,A",IM_NONE,IM_NONE},
	{"copy SP,A",IM_NONE,IM_NONE},
	{"xor.16 (--A),(--B)",IM_NONE,IM_NONE},
	{"st.16 0x%04x(SP),B",IM_WORD,IM_NONE},
	{"ld.16 C,0x%04x",IM_WORD,IM_NONE},
	{"br.ltu L%04X",IM_WORD,IM_NONE},
	{"st.8 0x%04x(DP),A",IM_WORD,IM_NONE},
	{"st.8 0x%02x(SP),A",IM_BYTE,IM_NONE},
	{"st.8 0x%04x(A),A",IM_WORD,IM_NONE},
	{"st.8 0x%04x(B),A",IM_WORD,IM_NONE},
	{"st.8 0x%04x(DP),B",IM_WORD,IM_NONE},
	{"st.8 0x%02x(SP),B",IM_BYTE,IM_NONE},
	{"st.8 0x%04x(A),B",IM_WORD,IM_NONE},
	{"st.8 0x%04x(B),B",IM_WORD,IM_NONE},
	{"st.16 0x%04x(DP),A",IM_WORD,IM_NONE},
	{"st.16 0x%02x(SP),A",IM_BYTE,IM_NONE},
	{"st.16 0x%04x(A),A",IM_WORD,IM_NONE},
	{"st.16 0x%04x(B),A",IM_WORD,IM_NONE},
	{"st.16 0x%04x(DP),B",IM_WORD,IM_NONE},
	{"st.16 0x%02x(SP),B",IM_BYTE,IM_NONE},
	{"st.16 0x%04x(A),B",IM_WORD,IM_NONE},
	{"st.16 0x%04x(B),B",IM_WORD,IM_NONE},
	{"ldcode.8 A,(B)",IM_NONE,IM_NONE},
	{"copy A,DP",IM_NONE,IM_NONE},
	{"ld.16 C,0x%04x",IM_WORD,IM_NONE},
	{"memcopy4",IM_NONE,IM_NONE},
	{"enter 0x%04x",IM_WORD,IM_NONE},
	{"enter 0x%02x",IM_EXT8,IM_NONE},
	{"vshl.16 A",IM_NONE,IM_NONE},
	{"vshl.16 B",IM_NONE,IM_NONE},
	{"memcopy",IM_NONE,IM_NONE},
	{"tosys",IM_NONE,IM_NONE},
	{"fromsys",IM_NONE,IM_NONE},
	{"ldclr.8 A,(B)",IM_NONE,IM_NONE},
	{"wdpte A,(B)",IM_NONE,IM_NONE},
	{"sbc.16 A,B",IM_NONE,IM_NONE},
	{"vshr.16 A",IM_NONE,IM_NONE},
	{"vshr.16 B",IM_NONE,IM_NONE},
	{"cmpb.ne.8 A,0x%04x(DP),L%04X",IM_WORD,IM_EXT8},
	{"cmpb.ne.8 A,0x%04x(SP),L%04X",IM_WORD,IM_EXT8},
	{"copy A,C",IM_NONE,IM_NONE},
	{"cmpb.ne.8 A,0x%04x(B),L%04X",IM_WORD,IM_EXT8},
	{"cmpb.ne.8 A,0x%04x,L%04X",IM_EXT8,IM_EXT8},
	{"cmpb.ne.8 A,0x0000,L%04X",IM_NONE,IM_EXT8},
	{"copy A,SP",IM_NONE,IM_NONE},
	{"cmpb.ne.8 A,B,L%04X",IM_EXT8,IM_NONE},
	{"cmpb.ne.16 A,0x%04x(DP),L%04X",IM_WORD,IM_EXT8},
	{"cmpb.ne.16 A,0x%04x(SP),L%04X",IM_WORD,IM_EXT8},
	{"bkpt",IM_NONE,IM_NONE},
	{"cmpb.ne.16 A,0x%04x(B),L%04X",IM_WORD,IM_EXT8},
	{"cmpb.ne.16 A,0x%04x,L%04X",IM_WORD,IM_EXT8},
	{"cmpb.ne.16 A,0x%04x,L%04X",IM_EXT8,IM_EXT8},
	{"cmpb.ne.16 A,0x0000,L%04X",IM_NONE,IM_EXT8},
	{"cmpb.ne.16 A,B,L%04X",IM_EXT8,IM_NONE},
};
}}}